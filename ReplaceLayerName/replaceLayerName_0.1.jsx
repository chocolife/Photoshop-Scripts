#target photoshopvar targetLayers = [];function main(){    	var dialog = showDialog();    if (dialog.show() == 2) { return };    alert("OK");	var document = activeDocument;	var layers = document.layers;	getLayer(layers);	var originalText = dialog.txtOriginal.text;	var replaceText = dialog.txtReplace.text;    	var num = targetLayers.length;	for(var i = 0; i < num; i++){        var tgtLayer = targetLayers[i];        var isVisible = tgtLayer.visible;        var layerName = tgtLayer.name;        var newName = layerName.replace(originalText, replaceText);        if (layerName != newName){            tgtLayer.name = newName;            tgtLayer.visible = isVisible;        }                //alert(newName);        /*		ret = replaceAll(layerName, originalText, replaceText);        alert(ret);        */	}}function showDialog(){	var dialog = new Window("dialog", "レイヤー名置換", [0, 0, 270, 130]);    dialog.btnOk = dialog.add("button", [170, 90, 250, 115], "OK");    dialog.btnCancel = dialog.add("button", [80, 90, 160, 115], "Cancel");    dialog.txtOriginal = dialog.add("edittext", [20, 15, 200, 40], "");    dialog.stxtOriginal = dialog.add("statictext", [210, 20, 250, 45], "を");    dialog.txtReplace = dialog.add("edittext", [20, 50, 200, 75], "");    dialog.stxtReplace = dialog.add("statictext", [210, 55, 250, 80], "に置換");    dialog.center();	return dialog;}function getLayer(layers){	var num = layers.length;	for(var i = 0; i < num; i++){		var layer = layers[i];		if(layer.typename == "LayerSet"){			getLayer(layer.layers);		}		targetLayers.push(layer);	}}/*function replaceAll(target, orgTxt, repTxt){	var reg = new RegExp(orgTxt, "g");	return target.replace(reg, repTxt);}*/if (app.documents.length == 0) {	alert("画像が開かれていません。"); } else {	main();}